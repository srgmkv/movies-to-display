{"version":3,"sources":["Images/up.svg","Images/down.svg","Images/up-red.svg","Images/down-red.svg","Images/github2.svg","actions/sorting-actions.ts","Containers/Button.tsx","Components/Header.tsx","Components/MovieItem.tsx","actions/modal-actions.ts","Components/CardsByRating.tsx","Components/CardsByYear.tsx","Containers/MoviesList.tsx","Components/Modal.tsx","Components/App.tsx","actions/fetching-actions.ts","reducers/fetchingResults.ts","reducers/sortingType.ts","reducers/modalStatus.ts","reducers/index.js","index.tsx"],"names":["module","exports","__webpack_require__","p","SortingActions","connect","state","ownProps","active","sort","sortingType","dispatch","onClick","type","_ref","ImgUrl","endsWith","UpImg","DownImg","UpRedImg","DownRedImg","title","react_default","a","createElement","className","src","alt","Header","href","Image","Containers_Button","showModal","id","localName","name","rating","CardsByRating","list","map","item","Components_MovieItem","key","localized_name","CardsInYearBlock","_ref2","moviesList","year","filter","b","CardsByYear","years","CardsByYear_CardsInYearBlock","errMessage","fetchingStatus","Fragment","sortType","v","i","indexOf","newlist","Object","objectSpread","yearsByAsc","Components_CardsByYear","yearsByDesc","moviesByRatingByAsc","Components_CardsByRating","moviesByRatingByDesc","console","log","Error","getSortedMovies","Modal","hideModalOnEsc","e","_this","props","hideModal","document","addEventListener","this","removeEventListener","_this$props","_moviesList$filter","movieItem","slicedToArray","description","image_url","stopPropagation","React","Component","modal","App","getMoviesData","src_Components_Header","isModalShown","src_Components_Modal","Containers_MoviesList","isShown","axios","then","payload","catch","err","errorData","initFetchingStatus","isLoading","arguments","length","undefined","action","initState","combineReducers","data","films","message","store","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","es","Components_App","getElementById"],"mappings":"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","file":"static/js/main.52c63dae.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/up.67dc6f42.svg\";","module.exports = __webpack_public_path__ + \"static/media/down.9b396690.svg\";","module.exports = __webpack_public_path__ + \"static/media/up-red.92da3763.svg\";","module.exports = __webpack_public_path__ + \"static/media/down-red.3d5f02f9.svg\";","module.exports = __webpack_public_path__ + \"static/media/github2.bf81ddad.svg\";","import { Action } from 'redux'\n\nexport const SortingActions: ISortingActions = {\n  SORT_BY_YEAR_ASC: 'SORT_BY_YEAR_ASC',\n  SORT_BY_YEAR_DESC: 'SORT_BY_YEAR_DESC',\n  SORT_BY_RATING_ASC: 'SORT_BY_RATING_ASC',\n  SORT_BY_RATING_DESC: 'SORT_BY_RATING_DESC'\n}\n\nexport interface ISortingActions {\n  SORT_BY_YEAR_ASC: 'SORT_BY_YEAR_ASC',\n  SORT_BY_YEAR_DESC: 'SORT_BY_YEAR_DESC',\n  SORT_BY_RATING_ASC: 'SORT_BY_RATING_ASC',\n  SORT_BY_RATING_DESC: 'SORT_BY_RATING_DESC'\n}\n\nexport type ISort = 'SORT_BY_YEAR_ASC' | 'SORT_BY_YEAR_DESC'\n  | 'SORT_BY_RATING_ASC' | 'SORT_BY_RATING_DESC'\n\nexport interface IActionsetSortingType extends Action {\n  type: 'SET_SORT_TYPE'\n  sort: ISort\n}\n\nexport function setSortingType(sort: ISort): IActionsetSortingType {\n  return {\n    type: 'SET_SORT_TYPE',\n    sort\n  }\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { setSortingType, ISort } from '../actions/sorting-actions'\nimport { IState } from '../interfaces'\nimport UpImg from '../Images/up.svg'\nimport DownImg from '../Images/down.svg'\nimport UpRedImg from '../Images/up-red.svg'\nimport DownRedImg from '../Images/down-red.svg'\n\ninterface Props extends OwnProps {\n  active?: boolean\n  onClick?: any\n}\ninterface OwnProps {\n  sort: ISort\n}\n\n//Компонент кнопки сортировки\nconst Button = ({ active, sort, onClick }: Props) => {\n\n  let ImgUrl: string; //здесь назначаем картинку кнопке сортировки\n  if (!active && sort.endsWith('ASC')) {\n    ImgUrl = UpImg\n  } else if (!active && sort.endsWith('DESC')) {\n    ImgUrl = DownImg\n  } else if (active && sort.endsWith('ASC')) {\n    ImgUrl = UpRedImg //если тип выбран, то кнопка красная\n  } else {\n    ImgUrl = DownRedImg //и здесь\n  }\n\n  const title = sort.endsWith('ASC') ? 'по возрастанию' : 'по убыванию'\n\n  return (\n    <div className={\"sort-button\"}\n      onClick={onClick}\n    >\n      <img src={ImgUrl} alt='' title={title} />\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: IState, ownProps: OwnProps): { active: boolean, sort: ISort } => ({\n  active: ownProps.sort === state.sortingType,\n  sort: ownProps.sort\n})\n\nconst mapDispatchToProps = (dispatch: any, ownProps: OwnProps): any => ({\n  onClick: () => dispatch(setSortingType(ownProps.sort))\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Button)","import React from 'react'\nimport './Header.scss'\nimport Button from '../Containers/Button'\nimport { SortingActions } from '../actions/sorting-actions'\nimport Image from '../Images/github2.svg'\n\nconst Header = () => {\n  return (\n    <div className=\"header\">\n      <a href=\"https://github.com/srgmkv\" title=\"github.com/srgmkv\">\n        <img src={Image} alt=\"\" />\n      </a>\n      <div className=\"sort\">\n        <div className=\"header-name-cont\">\n          <div className=\"header-name\">Сортировать</div>\n        </div>\n\n        <div className=\"sort-by\">\n\n          <div>по году:</div>\n          <div className=\"buttons\">\n            <Button sort={SortingActions.SORT_BY_YEAR_ASC} />\n            <Button sort={SortingActions.SORT_BY_YEAR_DESC} />\n          </div>\n        </div>\n        <div className=\"sort-by\">\n          <div>по рейтингу:</div>\n          <div className=\"buttons\">\n            <Button sort={SortingActions.SORT_BY_RATING_ASC} />\n            <Button sort={SortingActions.SORT_BY_RATING_DESC} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Header","import React from 'react'\nimport { connect } from 'react-redux'\nimport { showModal } from '../actions/modal-actions'\n\ninterface CardProps {\n  localName: string\n  name: string\n  rating: number\n  id: number\n  showModal: typeof showModal\n}\n//Компонент рендерит карточку фильма для списка фильмов\nconst MovieItem = ({ localName, name, rating, id, showModal }: CardProps) => {\n\n  return (\n    <div className=\"movie-card\"\n      onClick={() => showModal(id)}\n    >\n      <div className=\"names-block\">\n        <div className=\"local-name\">{localName}</div>\n        <div className=\"name\">{name}</div>\n      </div>\n      <div className=\"rating\">{rating ? <div>{rating}</div> : ''}</div>\n    </div>\n  )\n}\n\nexport default connect(null, { showModal })(MovieItem)\n\n\n","import { Action } from 'redux'\n\nexport type IActionModal = IActionShowModal | IActionHideModal\n\ninterface IActionShowModal extends Action {\n  type: 'SHOW_MODAL'\n  id: number\n}\n\ninterface IActionHideModal extends Action {\n  type: 'HIDE_MODAL'\n}\n\nexport function showModal(id: number): IActionShowModal {\n  return {\n    type: 'SHOW_MODAL',\n    id\n  }\n}\n\nexport function hideModal(): IActionHideModal {\n  return {\n    type: 'HIDE_MODAL'\n  }\n}","import React from 'react'\nimport { IMovieItem } from '../interfaces'\nimport MovieItem from './MovieItem'\n\ninterface CardsByRating {\n  list: IMovieItem[]\n\n}\n\n//Компонент рендерит список фильмов при сортировке по рейтингу\nconst CardsByRating = ({ list }: CardsByRating) => {\n\n  return (\n    <div className=\"sorted\">\n      <div className=\"cards\">\n        {list && list.map(item =>\n          <MovieItem\n            key={item.id}\n            localName={item.localized_name}\n            name={item.name}\n            rating={item.rating}\n            id={item.id}\n          />)}\n      </div>\n    </div>\n  )\n}\n\nexport default CardsByRating;\n","import React from 'react'\nimport { IMovieItem } from '../interfaces'\nimport MovieItem from './MovieItem'\n\ninterface CardsInYearBlock {\n  moviesList: IMovieItem[]\n  year: number\n}\n\ninterface CardsByYear {\n  list: IMovieItem[]\n  years: number[]\n}\n\n// Компонент рендерит набор блоков Год, в котором рендерятся компоненты Фильмы.\n// Ему передаем список фильмов из стейта и массив отсорттированных годов.\nconst CardsByYear = ({ list, years }: CardsByYear) => {\n\n  return (\n    <div className=\"movie-list\">\n\n      {years.map(year => {\n        return (\n          <div className=\"sorted\" key={year}>\n            <div className=\"year\">{year}</div>\n            <CardsInYearBlock moviesList={list} year={year} />\n          </div>\n        )\n      })}\n\n    </div>\n  )\n}\n\n//Компонент рендерит список фильмов в блоке Год\nconst CardsInYearBlock = ({ moviesList, year }: CardsInYearBlock) => {\n  return (\n    <div className=\"cards\">\n      {moviesList.filter(item => item.year === year)\n        .sort((a, b) => a.rating - b.rating)\n        .map(item =>\n          <MovieItem\n            key={item.id}\n            localName={item.localized_name}\n            name={item.name}\n            rating={item.rating}\n            id={item.id}\n          />)}\n    </div>\n  )\n}\n\nexport default CardsByYear","import React from 'react'\nimport { IMovieItem, IState } from '../interfaces'\nimport { connect } from 'react-redux'\nimport { ISort, SortingActions } from '../actions/sorting-actions'\nimport CardsByRating from '../Components/CardsByRating'\nimport CardsByYear from '../Components/CardsByYear'\nimport './MoviesList.scss'\n\ninterface State {\n  errMessage: string,\n  moviesList: IMovieItem[]\n  sort: ISort\n}\n\n//Компонент подготавливает данные для отображения списка фильма с нужной фильтрацией\nconst MovieList = ({ moviesList, errMessage, sort }: State) => {\n\n  //ф-я делает нужный компонент по типу сортировки\n  const getSortedMovies = (list: IMovieItem[], sortType: ISort) => {\n\n    const years = list.map((item: IMovieItem) => item.year)//массив уникальных годов\n      .filter((v, i, a) => a.indexOf(v) === i)\n\n    const newlist = list.map(item => {  // список фильмов, где false рейтинги заменены явно на 0 для точной сортировки\n      return item.rating ? item : { ...item, rating: 0 }\n    })\n\n    switch (sortType) { //проверяем тип сортировки и готовим данные, после чего возвращаем нужный компонент с этими данными\n      case SortingActions.SORT_BY_YEAR_ASC:\n        const yearsByAsc = years.sort((a, b) => a - b)\n        return <CardsByYear list={list} years={yearsByAsc} />\n\n      case SortingActions.SORT_BY_YEAR_DESC:\n        const yearsByDesc = years.sort((a, b) => b - a)\n        return <CardsByYear list={list} years={yearsByDesc} />\n\n      case SortingActions.SORT_BY_RATING_ASC:\n        const moviesByRatingByAsc = newlist.sort((a, b) => a.rating - b.rating)\n        return <CardsByRating list={moviesByRatingByAsc} />\n\n      case SortingActions.SORT_BY_RATING_DESC:\n        const moviesByRatingByDesc = newlist.sort((a, b) => b.rating - a.rating)\n        console.log('moviesByRatingByDesc', moviesByRatingByDesc)\n        return <CardsByRating list={moviesByRatingByDesc} />\n\n      default:\n        throw new Error('Unknown sort: ' + sortType)\n    }\n  }\n\n  return (\n    <>\n      {errMessage && <p className=\"error\">{errMessage}</p>} {/* Выводим ошибки */}\n      {getSortedMovies(moviesList, sort)} {/* Рендерим список с нужной сортировкой */}\n    </>\n  )\n}\n\nconst mapStateToProps = (state: IState): State => ({\n  moviesList: state.moviesList,\n  errMessage: state.fetchingStatus.errMessage,\n  sort: state.sortingType\n})\n\nexport default connect(mapStateToProps)(MovieList)","import React from 'react'\nimport { IState, IMovieItem } from '../interfaces'\nimport { connect } from 'react-redux'\nimport { hideModal } from '../actions/modal-actions'\nimport './Modal.scss'\n\ninterface IHideModal extends IModal {\n  hideModal: typeof hideModal\n}\n\ninterface IModal {\n  moviesList: IMovieItem[]\n  id: number | null\n}\n\n//Модальное окно, вызывается кликом по фильму в списке с информацией о фильме \nclass Modal extends React.Component<IHideModal> {\n  componentDidMount() { //вешаем обработчик нажатия Esc\n    document.addEventListener('keydown', this.hideModalOnEsc);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.hideModalOnEsc);\n  }\n\n  hideModalOnEsc = (e: any) => {\n    if (e.key === 'Escape') {\n      this.props.hideModal()\n    }\n  }\n\n  render() {\n    const { id, moviesList, hideModal } = this.props\n    const [movieItem] = moviesList.filter(item => item.id === id) //берем нужный фильм  по id из стейта\n    const { description, name, localized_name, year, rating, image_url } = movieItem //данные для рендера карточки фильма\n\n    return (\n      <div className=\"overlay\" onClick={hideModal}>\n        <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n          <div className=\"header\">\n            <div className=\"back\"\n              onClick={hideModal} />\n            <div className=\"local-name\">{localized_name}</div>\n          </div>\n          <div className=\"info\">\n            <div className=\"image\">\n              <span >\n                {image_url && <img src={image_url} alt={name} />}\n              </span>\n            </div>\n            <div className=\"list-info\">\n              <div className=\"name\">{name}</div>\n              <div className=\"year\">Год: <span className=\"year\">{year}</span></div>\n              <div className=\"rating\">Рейтинг: <span className=\"rating\">{rating}</span></div>\n            </div>\n          </div>\n          <div className=\"description\">{description}</div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state: IState): IModal => ({\n  moviesList: state.moviesList,\n  id: state.modal.id\n})\n\nexport default connect(mapStateToProps, { hideModal })(Modal)","import React from 'react'\nimport Header from './Header'\nimport { connect } from 'react-redux'\nimport { IState } from '../interfaces'\nimport { getMoviesData } from '../actions/fetching-actions'\nimport MoviesList from '../Containers/MoviesList'\nimport Modal from './Modal'\n\ninterface IModal {\n   isModalShown: boolean\n}\n\ninterface Props extends IModal {\n   getMoviesData: typeof getMoviesData\n}\n\n//Компонент -точка входа\nclass App extends React.Component<Props> {\n   componentDidMount() {\n      this.props.getMoviesData() //запрашиваем данные на сервере\n   }\n\n   render() {\n      return (\n         <div className=\"App\">\n            <Header />\n            {!this.props.isModalShown ? <MoviesList /> : <Modal />} {/* показываем фильмов || модальное окно по флагу из стейта */}\n         </div>\n      )\n   }\n}\n\nconst mapStateToProps = (state: IState): IModal => ({\n   isModalShown: state.modal.isShown\n})\n\nexport default connect(mapStateToProps, { getMoviesData })(App)","import axios from 'axios'\nimport { Action } from 'redux'\n\nexport interface IActionDataRequested extends Action {\n  type: 'DATA_REQUESTED'\n}\n\nexport interface IActionDataLoaded extends Action {\n  type: 'DATA_LOADED'\n  payload: any\n}\n\nexport interface IActionServerErrored extends Action {\n  type: 'SERVER_ERRORED'\n  errorData: any\n}\n\nexport type IFetchingActions = IActionDataRequested | IActionServerErrored | IActionDataLoaded;\n\nexport function dataRequested(): IActionDataRequested {\n  return { type: 'DATA_REQUESTED' }\n}\n\nexport function getMoviesData(): any {\n  return (dispatch: any) => {\n    dispatch(dataRequested())\n\n    const url = \"https://s3-eu-west-1.amazonaws.com/sequeniatesttask/films.json\"\n    const backupUrl = \"https://raw.githubusercontent.com/srgmkv/movies-to-display/master/public/films-backup.json\"\n\n    //запрашиваем данные с url, если ошибка, то с backupUrl, если ошибка, то обрабатываем ее/записываем,\n    axios(url)\n      .then((payload: any) => dispatch({ type: 'DATA_LOADED', payload }))\n      .catch(() => {\n        axios(backupUrl)\n          .then((payload: any) => dispatch({ type: 'DATA_LOADED', payload }))\n          .catch((err: any) => dispatch({ type: 'SERVER_ERRORED', errorData: err }))\n      })\n  }\n}","import { IFetchingActions } from '../actions/fetching-actions'\nimport { IMovieItem, IFetchingStatus } from '../interfaces'\n\nexport const moviesList = (state: IMovieItem[] = [], action: IFetchingActions): IMovieItem[] => {\n  switch (action.type) {\n    case 'DATA_LOADED':\n      return action.payload.data.films\n\n    default:\n      return state\n  }\n}\n\nconst initFetchingStatus: IFetchingStatus = {\n  isLoading: false,\n  errMessage: ''\n}\n\nexport const fetchingStatus = (state: IFetchingStatus = initFetchingStatus, action: IFetchingActions): IFetchingStatus => {\n  switch (action.type) {\n\n    case 'DATA_REQUESTED':\n      return {\n        errMessage: '',\n        isLoading: true\n      }\n    case 'DATA_LOADED':\n      return {\n        errMessage: '',\n        isLoading: false\n      }\n    case 'SERVER_ERRORED':\n      return {\n        isLoading: false,\n        errMessage: action.errorData.message\n      }\n\n    default:\n      return state\n  }\n}","import { SortingActions, IActionsetSortingType, ISort } from '../actions/sorting-actions'\n\nconst sortingType = (state: ISort = SortingActions.SORT_BY_YEAR_ASC, action: IActionsetSortingType): ISort => {\n  switch (action.type) {\n    case 'SET_SORT_TYPE':\n      return action.sort\n    default:\n      return state\n  }\n}\n\nexport default sortingType","import { IActionModal } from '../actions/modal-actions'\n\ninterface ModalState {\n  isShown: boolean,\n  id: number | null\n}\nconst initState = {\n  isShown: false,\n  id: null\n}\nconst modal = (state: ModalState = initState, action: IActionModal): ModalState => {\n  switch (action.type) {\n    case 'SHOW_MODAL':\n      return { isShown: true, id: action.id }\n    case 'HIDE_MODAL':\n      return { isShown: false, id: null}\n    default:\n      return state\n  }\n}\n\nexport default modal","import { combineReducers } from 'redux'\nimport {moviesList, fetchingStatus} from './fetchingResults'\nimport sortingType from './sortingType'\nimport modal from './modalStatus'\n\nexport default combineReducers({\n  moviesList,\n  fetchingStatus,\n  sortingType,\n  modal\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk';\nimport './index.scss'\n\nimport App from './Components/App';\nimport reducer from './reducers/index'\n\nconst store = createStore(\n  reducer, composeWithDevTools(\n    applyMiddleware(thunk)\n))\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'))"],"sourceRoot":""}