(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/up.67dc6f42.svg"},31:function(e,t,a){e.exports=a.p+"static/media/down.9b396690.svg"},32:function(e,t,a){e.exports=a.p+"static/media/up-red.92da3763.svg"},33:function(e,t,a){e.exports=a.p+"static/media/down-red.3d5f02f9.svg"},34:function(e,t,a){e.exports=a.p+"static/media/github2.bf81ddad.svg"},38:function(e,t,a){e.exports=a(69)},47:function(e,t,a){},48:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),c=a.n(i),s=a(2),o=a(4),l=a(28),m=a(29),u=(a(47),a(7)),d=a(8),v=a(10),E=a(9),f=a(11),p=(a(48),"SORT_BY_YEAR_ASC"),g="SORT_BY_YEAR_DESC",h="SORT_BY_RATING_ASC",y="SORT_BY_RATING_DESC";var b=a(30),O=a.n(b),N=a(31),w=a.n(N),D=a(32),_=a.n(D),S=a(33),k=a.n(S),A=Object(s.b)(function(e,t){return{active:t.sort===e.sortingType,sort:t.sort}},function(e,t){return{onClick:function(){return e({type:"SET_SORT_TYPE",sort:t.sort})}}})(function(e){var t,a=e.active,n=e.sort,i=e.onClick;t=!a&&n.endsWith("ASC")?O.a:!a&&n.endsWith("DESC")?w.a:a&&n.endsWith("ASC")?_.a:k.a;var c=n.endsWith("ASC")?"\u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e":"\u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e";return r.a.createElement("div",{className:"sort-button",onClick:i},r.a.createElement("img",{src:t,alt:"",title:c}))}),M=a(34),j=a.n(M),L=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"https://github.com/srgmkv",title:"github.com/srgmkv"},r.a.createElement("img",{src:j.a,alt:""})),r.a.createElement("div",{className:"sort"},r.a.createElement("div",{className:"header-name-cont"},r.a.createElement("div",{className:"header-name"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("div",{className:"sort-by"},r.a.createElement("div",null,"\u043f\u043e \u0433\u043e\u0434\u0443:"),r.a.createElement("div",{className:"buttons"},r.a.createElement(A,{sort:p}),r.a.createElement(A,{sort:g}))),r.a.createElement("div",{className:"sort-by"},r.a.createElement("div",null,"\u043f\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443:"),r.a.createElement("div",{className:"buttons"},r.a.createElement(A,{sort:h}),r.a.createElement(A,{sort:y})))))},R=a(15),T=a.n(R),C=a(35),x=a(16),B=a.n(x);var W=a(37);var Y=Object(s.b)(null,{showModal:function(e){return{type:"SHOW_MODAL",id:e}}})(function(e){var t=e.localName,a=e.name,n=e.rating,i=e.id,c=e.showModal;return r.a.createElement("div",{className:"movie-card",onClick:function(){return c(i)}},r.a.createElement("div",{className:"names-block"},r.a.createElement("div",{className:"local-name"},t),r.a.createElement("div",{className:"name"},a)),r.a.createElement("div",{className:"rating"},n?r.a.createElement("div",null,n):""))}),I=function(e){var t=e.list;return r.a.createElement("div",{className:"cards",style:{marginBottom:"5px"}},t&&t.map(function(e){return r.a.createElement(Y,{key:e.id,localName:e.localized_name,name:e.name,rating:e.rating,id:e.id})}))},z=function(e){var t=e.moviesList,a=e.year;return r.a.createElement("div",{className:"cards"},t.filter(function(e){return e.year===a}).sort(function(e,t){return e.rating-t.rating}).map(function(e){return r.a.createElement(Y,{key:e.id,localName:e.localized_name,name:e.name,rating:e.rating,id:e.id})}))},H=function(e){var t=e.list,a=e.years;return r.a.createElement("div",{className:"movie-list"},a.map(function(e){return r.a.createElement("div",{className:"sorted-by-year",key:e},r.a.createElement("div",{className:"year"},e),r.a.createElement(z,{moviesList:t,year:e}))}))},P=(a(67),Object(s.b)(function(e){return{moviesList:e.moviesList,errMessage:e.fetchingStatus.errMessage,sort:e.sortingType}})(function(e){var t=e.moviesList,a=e.errMessage,n=e.sort;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("p",{className:"error"},a)," ",function(e,t){var a=e.map(function(e){return e.year}).filter(function(e,t,a){return a.indexOf(e)===t}),n=e.map(function(e){return e.rating?e:Object(W.a)({},e,{rating:0})});switch(t){case p:var i=a.sort(function(e,t){return e-t});return r.a.createElement(H,{list:e,years:i});case g:var c=a.sort(function(e,t){return t-e});return r.a.createElement(H,{list:e,years:c});case h:var s=n.sort(function(e,t){return e.rating-t.rating});return r.a.createElement(I,{list:s});case y:var o=n.sort(function(e,t){return t.rating-e.rating});return console.log("moviesByRatingByDesc",o),r.a.createElement(I,{list:o});default:throw new Error("Unknown sort: "+t)}}(t,n)," ")})),U=a(36),G=(a(68),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).hideModalOnEsc=function(e){"Escape"===e.key&&a.props.hideModal()},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.hideModalOnEsc)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.hideModalOnEsc)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.moviesList,n=e.hideModal,i=a.filter(function(e){return e.id===t}),c=Object(U.a)(i,1)[0],s=c.description,o=c.name,l=c.localized_name,m=c.year,u=c.rating,d=c.image_url;return r.a.createElement("div",{className:"overlay",onClick:n},r.a.createElement("div",{className:"modal",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"back",onClick:n}),r.a.createElement("div",{className:"local-name"},l)),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"image"},r.a.createElement("span",null,d&&r.a.createElement("img",{src:d,alt:o}))),r.a.createElement("div",{className:"list-info"},r.a.createElement("div",{className:"name"},o),r.a.createElement("div",{className:"year"},"\u0413\u043e\u0434: ",r.a.createElement("span",{className:"year"},m)),r.a.createElement("div",{className:"rating"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",r.a.createElement("span",{className:"rating"},u)))),r.a.createElement("div",{className:"description"},s)))}}]),t}(r.a.Component)),J=Object(s.b)(function(e){return{moviesList:e.moviesList,id:e.modal.id}},{hideModal:function(){return{type:"HIDE_MODAL"}}})(G),V=function(e){function t(){return Object(u.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.getMoviesData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(L,null),this.props.isModalShown?r.a.createElement(J,null):r.a.createElement(P,null)," ")}}]),t}(r.a.Component),q=Object(s.b)(function(e){return{isModalShown:e.modal.isShown}},{getMoviesData:function(){return function(){var e=Object(C.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:B()("https://s3-eu-west-1.amazonaws.com/sequeniatesttask/films.json").then(function(e){return t({type:"DATA_LOADED",payload:e})}).catch(function(){B()("https://raw.githubusercontent.com/srgmkv/movies-to-display/master/public/films-backup.json").then(function(e){return t({type:"DATA_LOADED",payload:e})}).catch(function(e){return t({type:"SERVER_ERRORED",errorData:e})})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(V),F={isLoading:!1,errMessage:""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_TYPE":return t.sort;default:return e}},K={isShown:!1,id:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return{isShown:!0,id:t.id};case"HIDE_MODAL":return{isShown:!1,id:null};default:return e}},Z=Object(o.combineReducers)({moviesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOADED":return t.payload.data.films;default:return e}},fetchingStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_REQUESTED":return{errMessage:"",isLoading:!0};case"DATA_LOADED":return{errMessage:"",isLoading:!1};case"SERVER_ERRORED":return{isLoading:!1,errMessage:t.errorData.message};default:return e}},sortingType:Q,modal:X}),$=Object(o.createStore)(Z,Object(l.composeWithDevTools)(Object(o.applyMiddleware)(m.a)));c.a.render(r.a.createElement(s.a,{store:$},r.a.createElement(q,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.eb49f588.chunk.js.map