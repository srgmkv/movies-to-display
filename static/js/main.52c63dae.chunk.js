(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a.p+"static/media/up.67dc6f42.svg"},30:function(e,t,a){e.exports=a.p+"static/media/down.9b396690.svg"},31:function(e,t,a){e.exports=a.p+"static/media/up-red.92da3763.svg"},32:function(e,t,a){e.exports=a.p+"static/media/down-red.3d5f02f9.svg"},33:function(e,t,a){e.exports=a.p+"static/media/github2.bf81ddad.svg"},36:function(e,t,a){e.exports=a(66)},45:function(e,t,a){},46:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),c=a.n(i),s=a(2),o=a(4),l=a(27),m=a(28),u=(a(45),a(7)),d=a(8),v=a(10),E=a(9),f=a(11),p=(a(46),"SORT_BY_YEAR_ASC"),g="SORT_BY_YEAR_DESC",h="SORT_BY_RATING_ASC",y="SORT_BY_RATING_DESC";var b=a(29),O=a.n(b),N=a(30),D=a.n(N),_=a(31),w=a.n(_),A=a(32),S=a.n(A),k=Object(s.b)(function(e,t){return{active:t.sort===e.sortingType,sort:t.sort}},function(e,t){return{onClick:function(){return e({type:"SET_SORT_TYPE",sort:t.sort})}}})(function(e){var t,a=e.active,n=e.sort,i=e.onClick;t=!a&&n.endsWith("ASC")?O.a:!a&&n.endsWith("DESC")?D.a:a&&n.endsWith("ASC")?w.a:S.a;var c=n.endsWith("ASC")?"\u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e":"\u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e";return r.a.createElement("div",{className:"sort-button",onClick:i},r.a.createElement("img",{src:t,alt:"",title:c}))}),M=a(33),R=a.n(M),T=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"https://github.com/srgmkv",title:"github.com/srgmkv"},r.a.createElement("img",{src:R.a,alt:""})),r.a.createElement("div",{className:"sort"},r.a.createElement("div",{className:"header-name-cont"},r.a.createElement("div",{className:"header-name"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("div",{className:"sort-by"},r.a.createElement("div",null,"\u043f\u043e \u0433\u043e\u0434\u0443:"),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{sort:p}),r.a.createElement(k,{sort:g}))),r.a.createElement("div",{className:"sort-by"},r.a.createElement("div",null,"\u043f\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443:"),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{sort:h}),r.a.createElement(k,{sort:y})))))},j=a(15),L=a.n(j);var C=a(35);var W=Object(s.b)(null,{showModal:function(e){return{type:"SHOW_MODAL",id:e}}})(function(e){var t=e.localName,a=e.name,n=e.rating,i=e.id,c=e.showModal;return r.a.createElement("div",{className:"movie-card",onClick:function(){return c(i)}},r.a.createElement("div",{className:"names-block"},r.a.createElement("div",{className:"local-name"},t),r.a.createElement("div",{className:"name"},a)),r.a.createElement("div",{className:"rating"},n?r.a.createElement("div",null,n):""))}),Y=function(e){var t=e.list;return r.a.createElement("div",{className:"sorted"},r.a.createElement("div",{className:"cards"},t&&t.map(function(e){return r.a.createElement(W,{key:e.id,localName:e.localized_name,name:e.name,rating:e.rating,id:e.id})})))},x=function(e){var t=e.moviesList,a=e.year;return r.a.createElement("div",{className:"cards"},t.filter(function(e){return e.year===a}).sort(function(e,t){return e.rating-t.rating}).map(function(e){return r.a.createElement(W,{key:e.id,localName:e.localized_name,name:e.name,rating:e.rating,id:e.id})}))},B=function(e){var t=e.list,a=e.years;return r.a.createElement("div",{className:"movie-list"},a.map(function(e){return r.a.createElement("div",{className:"sorted",key:e},r.a.createElement("div",{className:"year"},e),r.a.createElement(x,{moviesList:t,year:e}))}))},I=(a(64),Object(s.b)(function(e){return{moviesList:e.moviesList,errMessage:e.fetchingStatus.errMessage,sort:e.sortingType}})(function(e){var t=e.moviesList,a=e.errMessage,n=e.sort;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("p",{className:"error"},a)," ",function(e,t){var a=e.map(function(e){return e.year}).filter(function(e,t,a){return a.indexOf(e)===t}),n=e.map(function(e){return e.rating?e:Object(C.a)({},e,{rating:0})});switch(t){case p:var i=a.sort(function(e,t){return e-t});return r.a.createElement(B,{list:e,years:i});case g:var c=a.sort(function(e,t){return t-e});return r.a.createElement(B,{list:e,years:c});case h:var s=n.sort(function(e,t){return e.rating-t.rating});return r.a.createElement(Y,{list:s});case y:var o=n.sort(function(e,t){return t.rating-e.rating});return console.log("moviesByRatingByDesc",o),r.a.createElement(Y,{list:o});default:throw new Error("Unknown sort: "+t)}}(t,n)," ")})),z=a(34),H=(a(65),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).hideModalOnEsc=function(e){"Escape"===e.key&&a.props.hideModal()},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.hideModalOnEsc)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.hideModalOnEsc)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.moviesList,n=e.hideModal,i=a.filter(function(e){return e.id===t}),c=Object(z.a)(i,1)[0],s=c.description,o=c.name,l=c.localized_name,m=c.year,u=c.rating,d=c.image_url;return r.a.createElement("div",{className:"overlay",onClick:n},r.a.createElement("div",{className:"modal",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"back",onClick:n}),r.a.createElement("div",{className:"local-name"},l)),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"image"},r.a.createElement("span",null,d&&r.a.createElement("img",{src:d,alt:o}))),r.a.createElement("div",{className:"list-info"},r.a.createElement("div",{className:"name"},o),r.a.createElement("div",{className:"year"},"\u0413\u043e\u0434: ",r.a.createElement("span",{className:"year"},m)),r.a.createElement("div",{className:"rating"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",r.a.createElement("span",{className:"rating"},u)))),r.a.createElement("div",{className:"description"},s)))}}]),t}(r.a.Component)),U=Object(s.b)(function(e){return{moviesList:e.moviesList,id:e.modal.id}},{hideModal:function(){return{type:"HIDE_MODAL"}}})(H),P=function(e){function t(){return Object(u.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.getMoviesData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(T,null),this.props.isModalShown?r.a.createElement(U,null):r.a.createElement(I,null)," ")}}]),t}(r.a.Component),G=Object(s.b)(function(e){return{isModalShown:e.modal.isShown}},{getMoviesData:function(){return function(e){e({type:"DATA_REQUESTED"}),L()("https://s3-eu-west-1.amazonaws.com/sequeniatesttask/films.json").then(function(t){return e({type:"DATA_LOADED",payload:t})}).catch(function(){L()("https://raw.githubusercontent.com/srgmkv/movies-to-display/master/public/films-backup.json").then(function(t){return e({type:"DATA_LOADED",payload:t})}).catch(function(t){return e({type:"SERVER_ERRORED",errorData:t})})})}}})(P),J={isLoading:!1,errMessage:""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_TYPE":return t.sort;default:return e}},V={isShown:!1,id:null},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return{isShown:!0,id:t.id};case"HIDE_MODAL":return{isShown:!1,id:null};default:return e}},F=Object(o.combineReducers)({moviesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOADED":return t.payload.data.films;default:return e}},fetchingStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_REQUESTED":return{errMessage:"",isLoading:!0};case"DATA_LOADED":return{errMessage:"",isLoading:!1};case"SERVER_ERRORED":return{isLoading:!1,errMessage:t.errorData.message};default:return e}},sortingType:Q,modal:q}),K=Object(o.createStore)(F,Object(l.composeWithDevTools)(Object(o.applyMiddleware)(m.a)));c.a.render(r.a.createElement(s.a,{store:K},r.a.createElement(G,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.52c63dae.chunk.js.map