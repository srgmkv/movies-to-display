(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/up.67dc6f42.svg"},27:function(e,t,a){e.exports=a.p+"static/media/down.9b396690.svg"},28:function(e,t,a){e.exports=a.p+"static/media/up-red.92da3763.svg"},29:function(e,t,a){e.exports=a.p+"static/media/down-red.3d5f02f9.svg"},30:function(e,t,a){e.exports=a.p+"static/media/github2.bf81ddad.svg"},36:function(e,t,a){e.exports=a(66)},45:function(e,t,a){},46:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),s=a.n(i),c=a(2),l=a(4),o=a(21),m=a(22),u=(a(45),a(23)),d=a(24),v=a(33),E=a(25),f=a(34),g=(a(46),"SORT_BY_YEAR_ASC"),p="SORT_BY_YEAR_DESC",h="SORT_BY_RATING_ASC",N="SORT_BY_RATING_DESC";var y=a(26),b=a.n(y),O=a(27),D=a.n(O),S=a(28),_=a.n(S),w=a(29),A=a.n(w),R=Object(c.b)(function(e,t){return{active:t.sort===e.sortingType,sort:t.sort}},function(e,t){return{onClick:function(){return e({type:"SET_SORT_TYPE",sort:t.sort})}}})(function(e){var t,a=e.active,n=e.sort,i=e.onClick;t=!a&&n.endsWith("ASC")?b.a:!a&&n.endsWith("DESC")?D.a:a&&n.endsWith("ASC")?_.a:A.a;var s=n.endsWith("ASC")?"\u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e":"\u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e";return r.a.createElement("div",{className:"sort-button",onClick:i},r.a.createElement("img",{src:t,alt:"",title:s}))}),T=a(30),M=a.n(T),L=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"https://github.com/srgmkv",title:"github.com/srgmkv"},r.a.createElement("img",{src:M.a,alt:""})),r.a.createElement("div",{className:"sort"},r.a.createElement("div",{className:"header-name-cont"},r.a.createElement("div",{className:"header-name"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("div",{className:"sort-by"},r.a.createElement("div",null,"\u043f\u043e \u0433\u043e\u0434\u0443:"),r.a.createElement("div",{className:"buttons"},r.a.createElement(R,{sort:g}),r.a.createElement(R,{sort:p}))),r.a.createElement("div",{className:"sort-by"},r.a.createElement("div",null,"\u043f\u043e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443:"),r.a.createElement("div",{className:"buttons"},r.a.createElement(R,{sort:h}),r.a.createElement(R,{sort:N})))))},k=a(31),j=a.n(k);var C=a(35);var Y=Object(c.b)(null,{showModal:function(e){return{type:"SHOW_MODAL",id:e}}})(function(e){var t=e.localName,a=e.name,n=e.rating,i=e.id,s=e.showModal;return r.a.createElement("div",{className:"movie-card",onClick:function(){return s(i)}},r.a.createElement("div",{className:"names-block"},r.a.createElement("div",{className:"local-name"},t),r.a.createElement("div",{className:"name"},a)),r.a.createElement("div",{className:"rating"},n?r.a.createElement("div",null,n):""))}),x=function(e){var t=e.list;return r.a.createElement("div",{className:"sorted"},r.a.createElement("div",{className:"cards"},t&&t.map(function(e){return r.a.createElement(Y,{key:e.id,localName:e.localized_name,name:e.name,rating:e.rating,id:e.id})})))},B=function(e){var t=e.moviesList,a=e.year;return r.a.createElement("div",{className:"cards"},t.filter(function(e){return e.year===a}).sort(function(e,t){return e.rating-t.rating}).map(function(e){return r.a.createElement(Y,{key:e.id,localName:e.localized_name,name:e.name,rating:e.rating,id:e.id})}))},W=function(e){var t=e.list,a=e.years;return r.a.createElement("div",{className:"movie-list"},a.map(function(e){return r.a.createElement("div",{className:"sorted",key:e},r.a.createElement("div",{className:"year"},e),r.a.createElement(B,{moviesList:t,year:e}))}))},I=(a(64),Object(c.b)(function(e){return{moviesList:e.moviesList,errMessage:e.fetchingStatus.errMessage,sort:e.sortingType}})(function(e){var t=e.moviesList,a=e.errMessage,n=e.sort;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("p",{className:"error"},a)," ",function(e,t){var a=e.map(function(e){return e.year}).filter(function(e,t,a){return a.indexOf(e)===t}),n=e.map(function(e){return e.rating?e:Object(C.a)({},e,{rating:0})});switch(t){case g:var i=a.sort(function(e,t){return e-t});return r.a.createElement(W,{list:e,years:i});case p:var s=a.sort(function(e,t){return t-e});return r.a.createElement(W,{list:e,years:s});case h:var c=n.sort(function(e,t){return e.rating-t.rating});return r.a.createElement(x,{list:c});case N:var l=n.sort(function(e,t){return t.rating-e.rating});return console.log("moviesByRatingByDesc",l),r.a.createElement(x,{list:l});default:throw new Error("Unknown sort: "+t)}}(t,n)," ")})),z=a(32),H=(a(65),Object(c.b)(function(e){return{moviesList:e.moviesList,id:e.modal.id}},{hideModal:function(){return{type:"HIDE_MODAL"}}})(function(e){var t=e.id,a=e.moviesList,n=e.hideModal,i=a.filter(function(e){return e.id===t}),s=Object(z.a)(i,1)[0],c=s.description,l=s.name,o=s.localized_name,m=s.year,u=s.rating,d=s.image_url;return r.a.createElement("div",{className:"overlay",onClick:n},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"back",onClick:n}),r.a.createElement("div",{className:"local-name"},o)),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"image"},r.a.createElement("span",null,d&&r.a.createElement("img",{src:d,alt:l}))),r.a.createElement("div",{className:"list-info"},r.a.createElement("div",{className:"name"},l),r.a.createElement("div",{className:"year"},"\u0413\u043e\u0434: ",r.a.createElement("span",{className:"year"},m)),r.a.createElement("div",{className:"rating"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",r.a.createElement("span",{className:"rating"},u)))),r.a.createElement("div",{className:"description"},c)))})),U=function(e){function t(){return Object(u.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.getMoviesData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(L,null),this.props.isModalShown?r.a.createElement(H,null):r.a.createElement(I,null)," ")}}]),t}(r.a.Component),G=Object(c.b)(function(e){return{isModalShown:e.modal.isShown}},{getMoviesData:function(){return function(e){e({type:"DATA_REQUESTED"}),j()("http://s3-eu-west-1.amazonaws.com/sequeniatesttask/films.json").then(function(t){return e({type:"DATA_LOADED",payload:t})}).catch(function(t){return e({type:"SERVER_ERRORED",errorData:t})})}}})(U),J={isLoading:!1,errMessage:""},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_TYPE":return t.sort;default:return e}},Q={isShown:!1,id:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return{isShown:!0,id:t.id};case"HIDE_MODAL":return{isShown:!1,id:null};default:return e}},q=Object(l.combineReducers)({moviesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_LOADED":return t.payload.data.films;default:return e}},fetchingStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_REQUESTED":return{errMessage:"",isLoading:!0};case"DATA_LOADED":return{errMessage:"",isLoading:!1};case"SERVER_ERRORED":return{isLoading:!1,errMessage:t.errorData.message};default:return e}},sortingType:P,modal:V}),F=Object(l.createStore)(q,Object(o.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));s.a.render(r.a.createElement(c.a,{store:F},r.a.createElement(G,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.9c97aaa3.chunk.js.map